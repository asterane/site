#+HUGO_SECTION: ./
#+HUGO_BASE_DIR: ../

#+HUGO_WEIGHT: auto
#+HUGO_AUTO_SET_LASTMOD: t

#+STARTUP: overview

* Pages
:PROPERTIES:
:EXPORT_HUGO_SECTION: 
:END:

** Home
:PROPERTIES:
:EXPORT_FILE_NAME: _index
:END:

I am an engineer, working on software and electronics. I often go by
the handle *asterane* on the internet. Welcome to my homepage!

[[file:../static/MatthewRothlisbergerResume.pdf][See my resume.]]

[[/grid][Check out The Grid.]]

*** Recent Posts
{{< postlist 5 >}}

*** Overview
Navigate the site using the links to the left (or above, on
mobile).

[[*About]] gives more information about me, my work, and my education.

Under [[*Projects]], find information about my engineering projects, each
of which has its own GitHub repository.

My [[*Blog]] contains writings on technology and engineering, hardware and
software alike.

In the footer are links to my [[https://github.com/asterane][GitHub]] profile, my [[*Contact]] page, and
the [[*Colophon]] for this site.


** About
:PROPERTIES:
:EXPORT_FILE_NAME: about
:END:

#+TOC: headlines 3

*** About Me
Hi, my name is Matthew Rothlisberger. I am a software engineer and
electrical engineer.

I am passionate about engineering as a mechanism to improve our world;
I find it fulfilling to implement effective solutions for difficult
and meaningful problems. I do my best to discover, learn, and use the
best tools available. My [[* Projects]] showcase some of my work.

*** About This Site
This site serves as a portfolio of my education, my work experience,
and of the engineering projects I have taken on over the
years. Sufficiently notable projects will be added and updated as I
make progress.

My [[* Blog]] is also hosted here. It is a place for me to write about
problems and solutions that interest me, primarily in the fields of
electrical engineering and software engineering. New posts will arrive
when I write them.

For more information on the technologies used to build this site,
consult the [[* Colophon]].

*** Education
**** COMMENT Utah State University
/2021 - 2025/

*In Progress*

*B.S. Electrical Engineering*

I have begun my study of electrical engineering at Utah State
University. I deferred my admission a year due to coronavirus
measures, and I expect to complete my Bachelor of Science degree in
Spring 2025. My courses so far have primarily covered programming and
digital circuit design.

**** Thomas Jefferson High School for Science and Technology
/2016 - 2020/

*Graduated*

*Electrical Engineering Focus*

I attended TJHSST for ninth through twelfth grades after being
admitted through an extensive application process. The highlights of
my experience were the two years of hands on electrical engineering
classes I took. We began with analog circuit design and built up to
processor design, signal processing, and more.

*** Work Experience
**** Audiovisual Event Technician
/2021 -/

*USU Event Services*

I supply audio, video, and lighting services for events in spaces
across a large college campus. I work independently and as part of a
team in equal measure. I set up and strike equipment, manage events to
ensure that they run smoothly, and operate indoors and outdoors. I am
skilled with all the equipment we use, including mixers, light boards,
video controllers, audio processors, and integration consoles.

**** Software Developer
/2020 -/

*Freelance*

I freelanced while my university admission was deferred, and still do
to an extent. I am working on various software projects using
languages and tools I am familiar with. Whenever I have time, I work
on open source and make an effort to learn valuable new engineering
skills.

**** Senior Audiovisual Technician
/2018 - 2020/

*Fairfax County Public Schools*

I was responsible for overseeing dozens of community events in an
auditorium that seats several hundred people. I developed proficiency
hanging and programming lighting fixtures; interfacing audio equipment
and equalizing signals; and working with customers of many cultures to
see their events through. I often worked under time pressure and under
unforeseen circumstances to ensure that events ran well.


** Projects
:PROPERTIES:
:EXPORT_FILE_NAME: projects
:END:

This is a list of my personal projects. Many are engineering efforts
and some were undertaken for the sake of learning. I feel that all
those listed are notable enough to include for now, but some will be
removed in the future, and more will certainly be added.

Several of these projects are not yet completed to my satisfaction,
and I am continuing work on the ones that I consider most valuable.

*** [[https://github.com/asterane/site][This Website]]
A personal homepage, blog, and portfolio website. Written from scratch
to be fast, clean, and responsive. Also see the
[[*Colophon][colophon]].

*** [[https://github.com/asterane/processor-design][Processor Design]]
Designing a custom sixteen bit central processing unit, and
constructing it out of discrete logic components.

*** [[https://github.com/asterane/the-grid][The Grid]]
[Readme forthcoming] Design through full implementation of a
completely custom LED display wall and software to control it,
measuring 12 feet high by 20 feet wide.

*** [[https://github.com/asterane/analog-design][Analog Circuit Design]]
Construction of a high fidelity 90 watt audio power amplifier. Also, a
voltage controlled oscillator design for frequency modulation.

*** [[https://github.com/asterane/realtime-dsp][Real Time Digital Signal Processing]]
Creating algorithms to correct audio distortion from speakers and the
environment. Written for processors and FPGA.

*** [[https://github.com/asterane/raycasting-demo][Raycasting Demonstration]]
Project to create a first person 3D game in the style of Doom, using
Java. Can move around single layer 3D environment.

*** [[https://github.com/asterane/set-design][Set Design]]
Design and construction of all sets for several large theatrical
shows. Used computer aided design.

*** [[https://github.com/asterane/robot-design][Robot Design]]
Building the chassis for a custom wheeled robot using cheap materials,
and writing software for it.

*** [[https://github.com/asterane/emacs-config][Emacs Configuration]]
My personal Emacs configuration file, with all the customization I use
to do my work from day to day.

*** [[https://github.com/asterane/c-exercises][C Exercises]]
Practice programming using the low level C language, dealing with
memory management, and creating efficient code.

*** [[https://github.com/asterane/rust-exercises][Rust Exercises]]
Learning the relatively new Rust systems language and its many
features characteristic of higher level languages.

*** [[https://github.com/asterane/python-exercises][Python Exercises]]
Early work learning how to program computers, as well as later efforts
in scripting various tasks.


** Blog
:PROPERTIES:
:EXPORT_FILE_NAME: blog
:END:

Welcome to the archives of my blog on engineering and
technology. There is not much here yet, but there will be more as time
goes on.

*** Posts
{{< postlist >}}


** Contact
:PROPERTIES:
:EXPORT_FILE_NAME: contact
:END:

If you are recruiting developers or engineers, I am interested. I also
want to hear any feedback you have about my projects or the site
itself.

If you really want to find my email address, I'm sure you
can. Otherwise, use this form to contact me just as easily.

#+BEGIN_EXPORT html
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSczyzqPe3l6Ou8hgKEyNH_Kt6vwgdLYhVxW7I4lMiyMGK7MkA/viewform?embedded=true" width="100%" height="1000" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
#+END_EXPORT


** Colophon
:PROPERTIES:
:EXPORT_FILE_NAME: colophon
:END:

#+TOC: headlines 1

All of the content on this site is either my work or is in the public
domain. I designed and implemented the user interface and style
myself.

To make this project easier, and serve the website to you, I used a
stack of excellent tools.

*** Creating site content

**** GNU Emacs
In my opinion, the greatest text editor / integrated development
environment ever created. Finely honed and infinitely customizable.

**** Org Mode
A feature filled hierarchical document creation system for Emacs, and
the closest to perfect to do management you can get.

**** GIMP
High quality image editor and converter, used to alter or touch up
many of the images I use on the site.

**** Vivaldi
Great browser based on Chromium, used to assess the appearance of the
site and debug the interactions between HTML, CSS, and JS.

*** Generating the site

**** GNU Make
Extremely flexible system for creating recipes to build software. Used
to condense several useful operations into single commands.

**** GNU Emacs
Used as an Emacs Lisp interpreter, running the functions required to
have all my source files converted into HTML for Jekyll.

**** =ox-hugo=
Backend for the Org mode exporter that generates Markdown content
files with front matter for Hugo, from my Org files.

**** Hugo
Fast and flexible static site generator that assembles my HTML layouts
and my generated content files into a complete website.

*** Serving the site

**** Git
Universally used version control system, handles tracking changes and
pushing site updates to GitHub.

**** Magit
Fantastic interface to Git from within Emacs. Provides convenient
keybindings and useful information for all version control tasks.

**** GitHub
Free hosting of source repositories and static sites alike; simply the
best option available for this site.

*** Languages used

**** HTML5
HyperText Markup Language, the standard internet markup language.

**** CSS3
Cascading Style Sheets, the standard internet styling language.

**** JavaScript
The standard internet scripting language.

**** Go Templates
Hugo's template language; enables easy dynamic generation of static
content.

**** TOML
Markup language used for Hugo configuration, like setting sitewide
variables.

**** Emacs Lisp
Lisp dialect which describes much of Emacs functionality. Used to
write directives for the Org mode publisher.

**** Makefile
Simple declarative language used to automate software builds.

**** Zsh
Extension of the Bourne again shell, used for scripting.

**** English
Germanic language written with a simple alphabet. Used to express
ideas to others.


* Grid
:PROPERTIES:
:EXPORT_HUGO_SECTION: grid
:END:

** The Grid
:PROPERTIES:
:EXPORT_FILE_NAME: _index
:END:

#+BEGIN_EXPORT html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/tetris_3.mp4" controls>Tetris</video>
#+END_EXPORT

*[Work in progress]*

[[*System]] here.

[[*Structure]] here.

[[*Electronics]] here.

[[*Software]] here.

[[*Reflection]] here.


** System
:PROPERTIES:
:EXPORT_FILE_NAME: system
:END:

[[/grid][Up to main Grid page]]

#+begin_export html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/refresh_test_2.mp4" controls title="Refresh Test">Refresh Test</video>
#+end_export

#+begin_export html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/fading.mp4" controls title="Fading">Fading</video>
#+end_export

#+begin_export html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/cues_1.mp4" controls title="Cues">Cues</video>
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/all_on_2.jpg" title="All On" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/troubleshooting.jpg" title="Troubleshooting" />
#+end_export

** Structure
:PROPERTIES:
:EXPORT_FILE_NAME: structure
:END:

[[/grid][Up to main Grid page]]

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/structure/stage_render.png" title="Stage Render" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/structure/cubes_5.jpg" title="Cubes" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/finished_2.jpg" title="Finished" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/finished_4.jpg" title="Finished" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/finished_5.jpg" title="Finished" />
#+end_export

** Electronics
:PROPERTIES:
:EXPORT_FILE_NAME: electronics
:END:

[[/grid][Up to main Grid page]]

#+begin_export html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/LED_test_3.mp4" controls title="LED Test">LED Test</video>
#+end_export

#+begin_export html
<video src="https://raw.githubusercontent.com/asterane/the-grid/master/media/videos/LED_test_4.mp4" controls title="LED Test">LED Test</video>
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/current-sources/schematics/circuit.svg" title="Circuit" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/current-sources/schematics/board.svg" title="Board Layout" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/current-sources/renderings/board2.png" title="Board Render" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/current-sources/renderings/board5.png" title="Board Render" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/current-sources/finished_boards_2.jpg" title="Finished Boards" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/power-supplies/psu_cover_render.png" title="PSU Cover Render" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/power-supplies/psu_assembly_2.jpg" title="PSU Assembly" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/power-supplies/finished_psu_2.jpg" title="Finished PSU" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/integration_08.jpg" title="Integration" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/integration_11.jpg" title="Integration" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/electronics/integration_12.jpg" title="Integration" />
#+end_export

** Software
:PROPERTIES:
:EXPORT_FILE_NAME: software
:END:

[[/grid][Up to main Grid page]]

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/software/control_interface_2.png" title="Control Interface" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/LEDarchitecture.png" title="LED Control Architecture" />
#+end_export

** Reflection
:PROPERTIES:
:EXPORT_FILE_NAME: reflection
:END:

[[/grid][Up to main Grid page]]

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/celebration_3.jpg" title="Celebration" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/grid.jpg" title="Grid" />
#+end_export

#+begin_export html
<img src="https://raw.githubusercontent.com/asterane/the-grid/master/media/pictures/group_shot.jpg" title="Group Shot" />
#+end_export


* Posts
:PROPERTIES:
:EXPORT_HUGO_SECTION: posts
:END:

** DONE Hello World!
CLOSED: [2020-09-22 Tue 12:00]
:PROPERTIES:
:EXPORT_FILE_NAME: hello-world
:END:

I have been interested in putting up my own website for some time, and
I've finally decided to make it happen. The coronavirus pandemic (I've
seen it referred to in one news article as "the ongoing global
situation") has offered me more time than expected to work on personal
projects, so I have been assembling this site for the last several
days. In this post, I briefly discuss my motivations and goals.
<!--more-->

*** My Intent
This site was conceived as a place to share my personal portfolio of
projects with friends, colleagues, and potential employers. The
resources comprising each project are stored in a repository on
GitHub, which this site links to. Eventually, I will create additional
pages on this site to showcase my work.

Each of the projects that interest me most, present or future, will
have their own showcase pages featuring explanations, diagrams, and
image galleries. Projects intended to be broadly useful to others will
also have documentation explaining features, specifications, and a
roadmap for future development.

*** This Blog
A primary motivation to create my own site is my interest in writing
about technology and engineering. Writing is a fantastic way to
organize and reconsider thoughts about a topic, and to gain new
insights. I have many exciting projects in the pipeline, almost all of
which I intend to write about in this blog.

My posts will focus on engineering problems that are interesting to
me; I will strive to make them interesting for any future readers of
this blog as well. I want to work from first principles, solve
difficult problems, and make things that help people. If all goes to
plan, my writings here will chronicle that work.

*** What Else
Check out my [[*Projects][projects]]! There are some really cool
things there. Or perhaps you would like to learn more [[*About][about
me]]. If you would like to contact me, use the link below. Thank you
for reading.


** DONE A Tale of Jekyll and Hugo
CLOSED: [2020-10-14 Wed 20:27]
:PROPERTIES:
:EXPORT_FILE_NAME: a-tale-of-jekyll-and-hugo
:END:

My journey to having a fully functional site where I can publish
content was somewhat convoluted, but highly educational. In this post,
I'll be sharing what I learned, discussing the process of creating a
site using Emacs and Org mode, and comparing the two leading static
site generators: Jekyll and Hugo.
<!--more-->

Some time ago, I became interested in writing a technical blog. I have
learned much from the blogs of others, and there is always more to
say. Later, the prospect of a personal portfolio where I could share
my work began to have its own appeal. In recent weeks, I have put up
this site to fill both purposes. Without further ado, let's begin.

#+TOC: headlines 2

*** Getting Started
When I chose to pursue this project, I had a few important goals. Here is
a list of the qualities I wanted my site to have.

- Hosting should be free. I'm not interested in paying for a domain
  name or hosting until I have a good reason to do so.
- I should have complete control of content and format. No irremovable
  themes, no "proudly powered by x" footer.
- It should be easy to publish content. I don't want to have to muck
  around with HTML when I am just writing a blog post.
- The site should be light, fast, and responsive. The less there is to
  design, and the fewer dependencies, the better.
- I should understand every part of my site, and the process by which
  it is published. This is a learning exercise as much as anything.

**** Static Sites
A website must include both formatting and content, the former
dictating how the latter will be displayed in browsers. In the
hypertext model used on the Web, format and content come in a single,
structured, HTML file that places content within blocks of
formatting.

This combination makes sense for rendering, and means that the
technically simplest way to create a website is to author HTML files
containing content within the desired format tags. This approach can
become cumbersome if the creator wants to change content frequently or
keep a uniform format across many pages with different content.

Static site generators offer another model for site creation, one
where the format and the content are conceptually distinct, only
combined together when the final site is generated, hence the name. As
the creator, you design HTML layouts for your site and use a
template language to tell the generator where your content should be
placed on the page.

You author your site's content in distinct files, in a significantly
more human readable format, where you can edit quickly and focus on
the structure of your text. When you choose to generate your site, the
generator combines any number of content pages with any number of
layouts according to specific rules; this makes it trivial to ensure
the same look for every page.

In a way, the static site generator acts as a linker, combining your
content with layouts that are ready for a browser to display. You can
reference variables and set up routines that run at generation time,
using the template language that your site generator of choice
provides. We will discuss this more in later sections.

**** Alternatives
I mentioned the issues with creating a site out of HTML files from
scratch, but there is another model for conceptual separation of
content and format. Most web content management systems use a server
backend that provides content dynamically, using scripts, to a
formatted page.

Such behavior is desirable for complex web applications, but is
unnecessary for simple blogs and personal websites. Static site
generators create a hierarchy of pages dynamically, but they are then
served statically, which reduces hosting requirements and technical
complexity significantly.

**** GitHub Pages
Free hosting along with total control over the site is a high bar, but
thankfully GitHub has been offering this service for some time. I
began by creating a new public repository with the name required by
Pages: =asterane.github.io=. I then created a folder on my machine
with the same name. GitHub Pages automatically integrates with the
static site generator Jekyll, which is where our story leads next.

*** Jekyll
Released in 2008, [[https://jekyllrb.com][Jekyll]] was the first major free and open source
static site generator. It is well supported by GitHub, which will
automatically generate and serve a site from a repository containing
Jekyll source. This was attractive to me, and Jekyll was the first
site generator I encountered, so I began by setting up my site this
way. Jekyll's template language is called Liquid.

To set up and test your site, it is important to install Jekyll on
your own computer. It comes as a Ruby gem, so it's possible to install
with =gem install jekyll bundle= as the [[https://jekyllrb.com/docs/][quickstart guide]]
recommends. For me, it was easier to use the Arch User Repository,
which provides the relevant gems as distinct packages. I created a new
site with =jekyll new asterane.github.io= and then =bundle exec jekyll
serve= to serve it on http://localhost:4000.

**** Resources
- http://jmcglone.com/guides/github-pages/
- https://orgmode.org/worg/org-tutorials/org-jekyll.html
- https://opensource.com/article/20/3/blog-emacs
  
**** Structure
A Jekyll site's top level directory contains the configuration file
(=_config.yml=), several important folders each prefixed with an
underscore, and all of the content files for the site (other than blog
posts). Anything that is not prefixed with an underscore or excluded
in the configuration file will be part of the generated site.

Layouts, kept in the =_layouts= directory, are provided as HTML files
with snippets of Liquid that indicate where content is meant to be
inserted. Below is a basic example of a =default.html= layout for a
Jekyll website.

#+begin_src html
<!DOCTYPE html>
<html>
  <head>
    <title>{{ page.title }}</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/blog">Blog</a></li>
      </ul>
    </nav>
    <div class="container">
      <h1>{{ page.title }}</h1>

      {{ content }}

    </div><!-- /.container -->
    <footer>
      <ul>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </footer>
  </body>
</html>
#+end_src

The Liquid tags are identifiers surrounded by double braces, like ={{
content }}=. These tell Jekyll what to insert at that area of a page
using this default layout. The title of a page will be defined in a
content file, which is usually Markdown or HTML, and the content
itself is the text of that file.

Content files may be Markdown, Textile, or even HTML with only a
=<body>= section. To tell Jekyll that they need to be generated into
pages, and to set important variables, all content files must begin
with Jekyll front matter. Here are the first four lines of a page
=helloworld.md=.

#+begin_src yaml
---
layout: default
title: Hello World
---
#+end_src

You can see that the page with this front matter will use the layout
we just defined at =_layouts/default.html=, and that the page title
will be "Hello World". There are other available variables, and you
may even create custom ones. The rest of the file is up to you,
containing your content represented with your chosen markup language.

Posts are a special type of page; content files for these are placed
in the =_drafts= directory while in progress, or in the =_posts=
directory for publishing. They must be named according to the format
=YYYY-MM-DD-put-name-here.EXT=, and will appear in the site's
structure at =/YYYY/MM/DD/put-name-here.html=.

We can define a layout just for posts, illustrating a useful feature
of static site layouts: they may be nested. A layout which is to use
another as a parent must begin with front matter. Here is an example
=post.html= layout that displays the date below the title.

#+begin_src html
---
layout: default
---

<p class="meta">{{ page.date | date_to_string }}</p>

<div class="post">
  {{ content }}
</div>
#+end_src

This layout inherits from our default layout but adds additional
information that should be useful for blog posts. The vertical bar is
a pipe, passing the page date into the =date_to_string= function,
which will convert it to =YYYY-MM-DD= format.

Folders containing useful resources may also be added to the Jekyll
site directory, such as =css= or =img=. Just like any site, you may
define your own stylesheet to customize the look and feel of yours
when it is displayed in a browser.

Below, see an example directory structure for a simple Jekyll
site. Any complete site will likely be more complicated than this, but
it serves to show how Jekyll structures its files in practice. The
generated site would be placed in a =_site= directory.

#+begin_example
.
â”œâ”€â”€ _layouts
â”‚   â”œâ”€â”€ default.html
â”‚   â””â”€â”€ post.html
â”œâ”€â”€ _drafts
â”œâ”€â”€ _posts
â”‚   â””â”€â”€ YYYY-MM-DD-put-name-here.md
â”œâ”€â”€ img
â”œâ”€â”€ css
â”‚   â””â”€â”€ main.css
â”œâ”€â”€ _config.yml
â”œâ”€â”€ index.md
â”œâ”€â”€ helloworld.md
â”œâ”€â”€ about.md
â”œâ”€â”€ blog.md
â””â”€â”€ contact.md
#+end_example

**** Generating Content
My love affair with [[https://www.gnu.org/software/emacs/][Emacs]] began shortly after my senior year of high
school was abruptly truncated by the aforementioned pandemic. I will
undoubtedly be writing more about Emacs in the future, but suffice it
to say that this tool has no equal. I knew that I had to be able to
create my site using Emacs.

What's more, I wanted to write all of my content in [[https://orgmode.org][Org mode]], the to
do management and document creation system included with Emacs. Fellow
Org mode users will understand why. If you have not yet made this
excellent software part of your life, I cannot recommend it more. So,
I needed a comfortable way to publish pages from Org files.

***** Org Publish
An excellent export system comes bundled with Org, which can publish
Org files to many other text formats. I chose to publish to HTML
because I had no intention of editing my published files, and table of
contents support is best for HTML export. Simply running the export
command over my Org content buffers would not suffice, though.

In the default mode, a file =example.org= will simply be exported to
=example.html=, in the same directory. I wanted to keep my content in
a subdirectory of my main Jekyll site, called =org=, and export all of
it to the top level at once. Helpfully, a facility that can do this
exists, Org Publish.

This utility publishes a group of files according to a set of per
project configuration options. These are meant to be set in one's
Emacs configuration file, but I wanted all of my settings to be
bundled in the same directory as the rest of my site, so I opted to
write my own set of build scripts, discussed momentarily.

I stored my Org Publish settings in an Emacs Lisp file
=publish.el=. They set the directory to publish to, express that Org
files should be published as HTML files containing only a body, and
that all other files (CSS, images) should be published verbatim. I
also included a function that runs when the file is loaded and
actually publishes the content.

#+begin_src emacs-lisp
(require 'ox-publish)
(setq org-publish-project-alist
      '(
        ("asterane-org"
         :base-directory "./org/"
         :base-extension "org"
         :publishing-directory "."
         :recursive t
         :publishing-function org-html-publish-to-html
         :headline-levels 5 ;; Could be whatever
         :html-extension "html"
         :body-only t ;; Only export between <body> </body>
         )
        ("asterane-static"
         :base-directory "./org/"
         :base-extension "html\\|css\\|js\\|md\\|png\\|jpg\\|gif\\|ico\\|pdf"
         :publishing-directory "."
         :recursive t
         :publishing-function org-publish-attachment
         )
        ("asterane-all" :components ("asterane-org" "asterane-static"))
        ))

(defun asterane-publish ()
  "Publishes all projects regardless of file modification status."
    (let ((current-prefix-arg 4))
      (call-interactively 'org-publish-all)
      )
  )
#+end_src

To ensure that my exported HTML bodies would be properly processed by
Jekyll, I also had to structure my Org files in such a way that
appropriate Jekyll front matter would be placed at the top of each
one. Each Org file I published from thus began as shown here.

#+begin_src org
,#+OPTIONS: toc:nil num:nil
,#+BEGIN_EXPORT html
---
layout: default
title: [title]
---
,#+END_EXPORT
#+end_src

***** GNU Make
My =publish.el= file was meant to be loaded into Emacs batch mode and
run from the top level directory of my Jekyll site. I wrote a Makefile
to accomplish this and other useful functions using only simple
commands, shown below.

#+begin_src makefile
.PHONY: serve publish

serve: publish
	@echo "Serving..."
	bundle exec jekyll serve --host=0.0.0.0

publish: publish.el
	@echo "Publishing..."
	emacs --batch --no-init-file --load publish.el --funcall asterane-publish

clean:
	@echo "Cleaning directory..."
	@find org -maxdepth 1 -mindepth 1 -type d -exec basename {} \; \
	| xargs rm -rvf
	@rm -rvf *.html
	@rm -rvf _site
#+end_src

With this Makefile in my site's directory, all I need to do to publish
my Org files to HTML bodies for Jekyll to process is to run =make
publish= at the command line. To serve my site over my local network
for testing, I run =make serve=, and to clean up all the generated
files, I run =make clean=.

I find that a system like this makes (pun intended) content creation
with Jekyll easy. I simply place all of my content in the =org=
directory as Org files, divided into subdirectories as necessary. My
stylesheets and images also go here. Running a few Make commands
publishes everything in seconds for me to view in the browser.

**** Issues
As you can see, I did set up a functioning system to publish my site
with Jekyll. Indeed, my site as generated by Jekyll was live on the
internet for a number of days. Despite this success, however, a number
of issues drove me to switch to Hugo, hence the title of this post.

The most important problem, and the reason I could not stay with my
original system, came down to poor integration between Jekyll and Org
mode. Essentially, no links between pages worked properly when the
site was live. They started out as Org links between files and were
exported as HTML links to paths that did not exist in the final site.

Jekyll's preferred way of linking pages together in content is through
the use of particular Liquid tags that are translated into good links
on generation, but this would have been a pain to use from Org, and
there were multiple other problems with Jekyll leading me to seek
another option.

Site generation was relatively slow. Even with only around ten pages,
it took a noticeable fraction of a second for Jekyll to generate and
serve the site. This is due to their use of Ruby, an interpreted
language; not the best choice for a piece of speed sensitive
production software.

Also bothersome was the clutter in my site repository. GitHub Pages
only publishes content files from the top level directory, which
swiftly began to fill with various HTML files. In addition, Jekyll
requires several files and folders to begin with an underscore, which
I regard as rather ugly.

*** Hugo
With the most features and fastest generation, [[https://gohugo.io][Hugo]], released in 2013,
is Jekyll's main competitor. I was attracted to it by the existence
of a powerful Org exporter just for Hugo, called =ox-hugo=. It is not
integrated with GitHub, but it generates complete sites that can still
be served through GitHub Pages. Hugo is written in Go and uses the Go
template language.

It was clear that switching to Hugo as my static site generator would
fix all of my main issues with Jekyll. The tighter Org mode
integration made my links work properly, the use of a compiled
language aided extremely fast generation, and the directory structure
is much cleaner to my eye.

Hugo comes in the Arch and Manjaro repositories, so it was easy for me
to install the compiled application on my computer. As suggested by
the [[https://gohugo.io/getting-started/quick-start/][quick start guide]], I ran =hugo new site asterane= to lay out the
directory structure. I then ran =hugo server -D=, which served my
fledgling site on http://localhost:1313.

**** Resources
:PROPERTIES:
:CUSTOM_ID: hugo-resources
:END:

- https://zwbetz.com/make-a-hugo-blog-from-scratch/
- https://www.shanesveller.com/blog/2018/02/13/blogging-with-org-mode-and-ox-hugo/
- https://jpdroege.com/blog/hugo-shortcodes-partials/
  
**** Structure
:PROPERTIES:
:CUSTOM_ID: hugo-structure
:END:

In a Hugo site's top level directory, there are several important
folders and a configuration file. The site creator may add any other
files or folders deemed necessary, but the final site will only be
generated from the contents of particular folders, according to a
clearly documented set of rules. A simple configuration file,
=config.toml=, appears below.

#+begin_src conf
baseURL = "https://asterane.github.io/"
languageCode = "en-us"
title = "asterane"

[params]
  Name = "Matthew Rothlisberger"

[markup.highlight]
  style = "emacs"

[markup.goldmark.renderer]
  unsafe = true
#+end_src

This is brief and clean, setting the base link URL, site title,
creator name, and code highlighting style. Parameters from the config
may be used in layouts, which are in the =layouts= directory. Layouts
are HTML files with bits of Go template language that indicate where
content and various parameters should be inserted.

The default layout for an entire site resides in
=layouts/_default/baseof.html=. All layouts will inherit from this one
unless otherwise specified; a default for list pages may also be
created. Here is a basic example of a =baseof.html= layout for Hugo.

#+begin_src html
<!DOCTYPE html>
<html>
  <head>
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/blog">Blog</a></li>
      </ul>
    </nav>
    <div class="container">

      {{ block "main" . }}

      {{ end }}

    </div><!-- /.container -->
    <footer>
      <ul>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </footer>
  </body>
</html>
#+end_src

Note that in Hugo templates, the tags are surrounded by double braces
and the parameters are accessed using dot notation. To access any site
parameter, one dot comes in front of the first name and namespaces are
separated with further dots. Identifiers without blocks are keywords
or functions.

One such example is the "main" block seen in the container. This tells
Hugo where to insert the contents of templates that inherit from this
one. In addition to =baseof.html=, Hugo requires the provision of two
other templates: =single.html= and =index.html=. The former provides
the template for all single pages; the latter, the template for the
site's main page. See a basic =single.html= below.

#+begin_src html
{{ define "main" }}

<h1>{{ .Title }}</h1>
{{ .Content }}

{{ end }}
#+end_src

You can see that the ={{ define "main" }}= of the single page template
will slot neatly into the ={{ block "main" }}= of the base
template. The content of the page is actually inserted here. Hugo
separates the base from the single page template because you are also
permitted to make templates for pages that list single pages.

The =index.html= template inherits from the base template and enables
special formatting or content for the site's home page. Of course,
templates can be as granular as one desires. Of note for GitHub Pages,
a =404.html= template can also be created and will be automatically
displayed when an invalid URL is accessed.

Content files, appropriately, live in the =content= directory as
Markdown. They may be split up into subdirectories as desired, each
representing a distinct section of the site. Every content file must
contain Hugo front matter, depicted here.

#+begin_src conf
+++
title = "Hello World"
author = ["Name Here"]
+++
#+end_src

This sets the title and author of the page; many other variables
describing a page may also be set in the front matter, including
arbitrary variables. Front matter is only required in Markdown content
files, not in any templates or layouts. Also note that Hugo
automatically determines the layout based on file name and section.

Static sitewide resources are placed in the =static= directory. These
include CSS style sheets and images, like icons. During generation,
Hugo pulls together the layouts, content, and resources; the completed
site is output in the =public= directory.

Here is an example directory for a simple Hugo site. Some of the
autogenerated folders are unused; they could be deleted if
desired. The conceptual division between content, layouts, and
resources is apparent. Different layouts will apply to different
content based on directory structure and name.

#+begin_example
.
â”œâ”€â”€ archetypes
â”‚   â””â”€â”€ default.md
â”œâ”€â”€ data
â”œâ”€â”€ themes
â”œâ”€â”€ content
â”‚   â”œâ”€â”€ posts
â”‚   â”‚   â””â”€â”€ helloworld.md
â”‚   â”œâ”€â”€ _index.md
â”‚   â”œâ”€â”€ about.md
â”‚   â”œâ”€â”€ blog.md
â”‚   â””â”€â”€ contact.md
â”œâ”€â”€ layouts
â”‚   â”œâ”€â”€ _default
â”‚   â”‚   â”œâ”€â”€ baseof.html
â”‚   â”‚   â””â”€â”€ single.html
â”‚   â”œâ”€â”€ posts
â”‚   â”‚   â””â”€â”€ single.html
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ 404.html
â”œâ”€â”€ static
â”‚   â”œâ”€â”€ img
â”‚   â””â”€â”€ css
â”‚       â””â”€â”€ main.css
â””â”€â”€ config.toml
#+end_example

**** Generating Content
:PROPERTIES:
:CUSTOM_ID: hugo-content
:END:

Of course, with Hugo I still intended to author all of my content in
Emacs. Part of what drew me to Hugo is the presence of a well
maintained Org mode exporter that specifically targets Hugo
markdown. This exporter has useful features that completely changed
the way I create my site content for the better.

***** =ox-hugo=
All of the Org exporter backends are named in the form ox-[target],
such as =ox-html= or =ox-md=. Thus, the exporter for Hugo is called
[[https://ox-hugo.scripter.co][=ox-hugo=]]. This backend gives full access to Hugo features and sets
front matter, all using Org syntax that is much more comfortable than
TOML and Markdown.

The most powerful feature =ox-hugo= enables is keeping all the content
for an entire site in a single Org file. Subtrees can be singled out
for export as distinct files, divided into sections, and more. Every
page in my site, regular pages and blog posts alike, is generated from
a single Org file. Org property drawers are used to set output
filenames and any desired front matter variables.

I highly recommend exploring the =ox-hugo= website for further
information on the exporter. It is simple to get started using, but
there are many helpful features and a few caveats to be aware of. It
makes my publishing process practically effortless.

My content file is at =org/content.org= relative to my Hugo site
directory. I have indicated at the top of the file where this base
directory is. When I press the key combination =C-c C-e H A=, all of
the subtrees in my file are exported to their Markdown content files,
with front matter generated.

***** Multiple Repositories
Hugo does not integrate with GitHub Pages, so only the generated site
may be placed in the repository from which the site is served. This
necessitates creating two repositories: one for the site source and
one for the generated site which GitHub serves at my URL. The Hugo
website provides [[https://gohugo.io/hosting-and-deployment/hosting-on-github/][some advice]], which I used for my site.

The site source now resides at a new repository I created; I made the
=public= directory a git submodule with its remote at the
=asterane.github.io= repository. I use the =deploy.sh= script shown on
the above linked page to push my generated site to GitHub after
changing it. To manage the source repo, I just use Magit.

Even though Hugo vastly simplifies most steps of my site publishing
process, I still wanted a unified interface to my commonly used
operations. I created a simple Makefile, shown here, that can serve my
site locally, publish it to =public=, deploy =public=, and clean up
generated files.

#+begin_src makefile
.PHONY: deploy serve publish

deploy:
	@./deploy.sh

serve:
	@echo "Serving..."
	hugo server -D --bind 0.0.0.0

publish:
	@echo "Publishing..."
	hugo

clean:
	@echo "Cleaning generated files..."
	@rm -rvf public/*
	@rm -rvf content/*
#+end_src

Now, a few keystrokes in Emacs export all of my content to Markdown
ready for Hugo. Just a couple =make= commands later, my changes are
pushed live. I can then go ahead and commit the site source to ensure
that everything is tracked and backed up.

*** Comparison
As you have seen, I created a complete static site and publishing
system from scratch using Jekyll, and then using Hugo. I recommend
Hugo over Jekyll for anybody seeking to create a static
website. Jekyll may be slightly easier to understand at first, but
every other advantage lies with Hugo.

Hugo as an application is smaller than Jekyll, being compiled. It is
also significantly faster at its work, generating almost all sites in
far less than a second. Jekyll, however, takes a second or longer to
generate even sites with only a few pages.

The organization of Hugo site source is cleaner, makes more sense, and
offers greater flexibility than that of Jekyll. Clutter is absent,
conceptual distinctions are clear, and there are many more ways to
organize and interact with content.

Templates are key to pages with dynamic generation; Hugo has the
advantage here too. I did not explore the template, partial, and
shortcode systems in this post, but I did use them for this site, and
they are far more powerful than their counterparts from Jekyll.

I know many site creators may not value this aspect, but Hugo has far
better integration with Emacs and Org mode, which makes it much easier
to author site content than it would otherwise be. My interface to my
site is clean and uncluttered thanks to these tools.

My efforts in putting up a personal site taught me a lot about web
development and have resulted in an excellent place to share my
work. I encourage everyone to try putting up their own blog or
portfolio. If you do, create a static site, and remember to use Hugo
to generate it. That is, unless something better[fn:1] comes along
in the meantime.

[fn:1] See [[https://github.com/grego/blades][Blades]].


** TODO [Working Title] Falling Behind
:PROPERTIES:
:END:

Our tools are not up to the task of solving our problems, and they
have seen little improvement since the computing age began. Why has
this happened, and what should be done about it...
